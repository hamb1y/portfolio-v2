---
import Layout from "../components/Layout.astro";
import Card from "../components/Card.astro";
import { getCollection } from 'astro:content';

const achievements = await getCollection('achievements');
const sortedAchievements = [...achievements].sort((a, b) => 
  (b.data.priority || 0) - (a.data.priority || 0)
);
---

<Layout title="Achievements">
  <div class="min-h-screen pt-32">
    <div class="container">
      <h1 class="text-5xl font-bold mb-12">Achievements & Certifications</h1>
      
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        {sortedAchievements.map((achievement) => {
          const { type, title, description, date, image } = achievement.data;
          return (
            <Card variant="glass" className="hover-scale transition-transform duration-300">
              <div class="p-6">
                <div class="flex items-start gap-4">
                  {image && (
                    <img 
                      src={image} 
                      alt={title} 
                      class="w-16 h-16 rounded-lg object-cover"
                    />
                  )}
                  <div class="flex-1">
                    <div class="flex justify-between items-start">
                      <h3 class="text-2xl font-bold">{title}</h3>
                      {date && (
                        <span class="glass-badge">{new Date(date).getFullYear()}</span>
                      )}
                    </div>
                    
                    {type && (
                      <span class="inline-block px-3 py-1 bg-surface-light rounded-full text-sm mb-3">
                        {type}
                      </span>
                    )}
                    
                    <p class="text-text-muted mt-3">{description}</p>
                  </div>
                </div>
              </div>
            </Card>
          );
        })}
      </div>
    </div>
  </div>
</Layout>